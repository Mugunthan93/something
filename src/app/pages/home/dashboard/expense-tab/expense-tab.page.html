
<ion-header>
    <ion-row class="totalExpense">
        <ion-row class="total">
            <ion-label>TOTAL EXPENSES</ion-label>
            <ion-title class="larger" *ngIf="!(loading$ | async)">{{ totalCost() | async | currency : 'INR' }}</ion-title>
            <ion-skeleton-text animated style="width: 20%" *ngIf="(loading$ | async)"></ion-skeleton-text>
    
        </ion-row>
        <ion-progress-bar type="indeterminate" *ngIf="(loading$ | async)"></ion-progress-bar>
        <ion-progress-bar [value]="progress$ | async" *ngIf="!(loading$ | async)"></ion-progress-bar>
        <ion-row class="paid-bal">
            <ion-row>
                <ion-label class="bold large" *ngIf="!(loading$ | async)">{{ totalSpent() | async | currency : 'INR' }}</ion-label>
                <ion-skeleton-text animated *ngIf="(loading$ | async)"></ion-skeleton-text>
                <ion-label class="title">PAID</ion-label>
            </ion-row>
            <ion-row>
                <ion-label class="bold large" *ngIf="!(loading$ | async)">{{ totalSaving() | async | currency : 'INR' }}</ion-label>
                <ion-skeleton-text animated *ngIf="(loading$ | async)"></ion-skeleton-text>
                <ion-label class="title">BALANCE</ion-label>
            </ion-row>
        </ion-row>
    </ion-row>
    <ion-row class="addtrip">
        <ion-button (click)="addTrip()">
            <ion-label>Add Trip</ion-label>
        </ion-button>
    </ion-row>
</ion-header>


<ion-content>
    <ion-virtual-scroll [items]="trips$ | async" approxItemHeight="60px">
        <ion-card *virtualItem="let trip">
            <ion-card-header>
                <ion-item>
                    <ion-skeleton-text animated *ngIf="(loading$ | async)"></ion-skeleton-text>
                    <ion-label  class="large bold" *ngIf="!(loading$ | async)">{{ trip.startDate | date : 'LLL yyyy' | uppercase}}</ion-label>
                </ion-item>
            </ion-card-header>
            <ion-card-content>
                <ion-item class="total">
                    <ion-skeleton-text slot="start" animated *ngIf="(loading$ | async)"></ion-skeleton-text>
                    <ion-skeleton-text slot="end" animated *ngIf="(loading$ | async)"></ion-skeleton-text>
                    <ion-title slot="start" class="large bold" *ngIf="!(loading$ | async)">{{ trip.trip_name | titlecase }}</ion-title>
                    <ion-title slot="end" class="large bold" *ngIf="!(loading$ | async)">{{ tripTotalCost(trip) | async | currency : 'INR' }}</ion-title>
                </ion-item>
                <ion-item class="reimburse">
                    <ion-skeleton-text slot="start" animated *ngIf="(loading$ | async)"></ion-skeleton-text>
                    <ion-skeleton-text slot="end" animated *ngIf="(loading$ | async)"></ion-skeleton-text>
                    <ion-label slot="start" class="large bold" *ngIf="!(loading$ | async)">Reimbursable Amount</ion-label>
                    <ion-label slot="end"  class="large bold" *ngIf="!(loading$ | async)">{{ tripReImbursableCost(trip) | async | currency : 'INR' }}</ion-label>
                </ion-item>
            </ion-card-content>
        </ion-card>
    </ion-virtual-scroll>
</ion-content>
